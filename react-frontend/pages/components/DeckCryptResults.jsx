import React from "react";

import abombwe from './../../assets/images/disciplines/abombwe.gif';
import animalism from './../../assets/images/disciplines/animalism.gif';
import auspex from './../../assets/images/disciplines/auspex.gif';
import celerity from './../../assets/images/disciplines/celerity.gif';
import chimerstry from './../../assets/images/disciplines/chimerstry.gif';
import daimoinon from './../../assets/images/disciplines/daimoinon.gif';
import dominate from './../../assets/images/disciplines/dominate.gif';
import dementation from './../../assets/images/disciplines/dementation.gif';
import fortitude from './../../assets/images/disciplines/fortitude.gif';
import melpominee from './../../assets/images/disciplines/melpominee.gif';
import mytherceria from './../../assets/images/disciplines/mytherceria.gif';
import necromancy from './../../assets/images/disciplines/necromancy.gif';
import obeah from './../../assets/images/disciplines/obeah.gif';
import obfuscate from './../../assets/images/disciplines/obfuscate.gif';
import obtenebration from './../../assets/images/disciplines/obtenebration.gif';
import potence from './../../assets/images/disciplines/potence.gif';
import presence from './../../assets/images/disciplines/presence.gif';
import protean from './../../assets/images/disciplines/protean.gif';
import quietus from './../../assets/images/disciplines/quietus.gif';
import sanguinus from './../../assets/images/disciplines/sanguinus.gif';
import serpentis from './../../assets/images/disciplines/serpentis.gif';
import spiritus from './../../assets/images/disciplines/spiritus.gif';
import temporis from './../../assets/images/disciplines/temporis.gif';
import thanatosis from './../../assets/images/disciplines/thanatosis.gif';
import thaumaturgy from './../../assets/images/disciplines/thaumaturgy.gif';
import valeren from './../../assets/images/disciplines/valeren.gif';
import vicissitude from './../../assets/images/disciplines/vicissitude.gif';
import visceratika from './../../assets/images/disciplines/visceratika.gif';
import abombwesup from './../../assets/images/disciplines/abombwesup.gif';
import animalismsup from './../../assets/images/disciplines/animalismsup.gif';
import auspexsup from './../../assets/images/disciplines/auspexsup.gif';
import celeritysup from './../../assets/images/disciplines/celeritysup.gif';
import chimerstrysup from './../../assets/images/disciplines/chimerstrysup.gif';
import daimoinonsup from './../../assets/images/disciplines/daimoinonsup.gif';
import dominatesup from './../../assets/images/disciplines/dominatesup.gif';
import dementationsup from './../../assets/images/disciplines/dementationsup.gif';
import fortitudesup from './../../assets/images/disciplines/fortitudesup.gif';
import melpomineesup from './../../assets/images/disciplines/melpomineesup.gif';
import mytherceriasup from './../../assets/images/disciplines/mytherceriasup.gif';
import necromancysup from './../../assets/images/disciplines/necromancysup.gif';
import obeahsup from './../../assets/images/disciplines/obeahsup.gif';
import obfuscatesup from './../../assets/images/disciplines/obfuscatesup.gif';
import obtenebrationsup from './../../assets/images/disciplines/obtenebrationsup.gif';
import potencesup from './../../assets/images/disciplines/potencesup.gif';
import presencesup from './../../assets/images/disciplines/presencesup.gif';
import proteansup from './../../assets/images/disciplines/proteansup.gif';
import quietussup from './../../assets/images/disciplines/quietussup.gif';
import sanguinussup from './../../assets/images/disciplines/sanguinussup.gif';
import serpentissup from './../../assets/images/disciplines/serpentissup.gif';
import spiritussup from './../../assets/images/disciplines/spiritussup.gif';
import temporissup from './../../assets/images/disciplines/temporissup.gif';
import thanatosissup from './../../assets/images/disciplines/thanatosissup.gif';
import thaumaturgysup from './../../assets/images/disciplines/thaumaturgysup.gif';
import valerensup from './../../assets/images/disciplines/valerensup.gif';
import vicissitudesup from './../../assets/images/disciplines/vicissitudesup.gif';
import visceratikasup from './../../assets/images/disciplines/visceratikasup.gif';
import defense from '././../../assets/images/disciplines/defense.gif';
import innocence from './../../assets/images/disciplines/innocence.gif';
import justice from './../../assets/images/disciplines/justice.gif';
import martyrdom from './../../assets/images/disciplines/martyrdom.gif';
import redemption from './../../assets/images/disciplines/redemption.gif';
import vengeance from './../../assets/images/disciplines/vengeance.gif';
import vision from './../../assets/images/disciplines/vision.gif';

import abomination from './../../assets/images/clans/abomination.gif';
import ahrimane from './../../assets/images/clans/ahrimane.gif';
import akunanse from './../../assets/images/clans/akunanse.gif';
import assamite from './../../assets/images/clans/assamite.gif';
import baali from './../../assets/images/clans/baali.gif';
import bloodbrother from './../../assets/images/clans/bloodbrother.gif';
import brujah from './../../assets/images/clans/brujah.gif';
import brujahantitribu from './../../assets/images/clans/brujahantitribu.gif';
import caitiff from './../../assets/images/clans/caitiff.gif';
import daughterofcacophony from './../../assets/images/clans/daughterofcacophony.gif';
import followerofset from './../../assets/images/clans/followerofset.gif';
import gangrel from './../../assets/images/clans/gangrel.gif';
import gangrelantitribu from './../../assets/images/clans/gangrelantitribu.gif';
import gargoyle from './../../assets/images/clans/gargoyle.gif';
import giovanni from './../../assets/images/clans/giovanni.gif';
import guruhi from './../../assets/images/clans/guruhi.gif';
import harbingerofskulls from './../../assets/images/clans/harbingerofskulls.gif';
import ishtarri from './../../assets/images/clans/ishtarri.gif';
import kiasyd from './../../assets/images/clans/kiasyd.gif';
import lasombra from './../../assets/images/clans/lasombra.gif';
import malkavian from './../../assets/images/clans/malkavian.gif';
import malkavianantitribu from './../../assets/images/clans/malkavianantitribu.gif';
import nagaraja from './../../assets/images/clans/nagaraja.gif';
import nosferatu from './../../assets/images/clans/nosferatu.gif';
import nosferatuantitribu from './../../assets/images/clans/nosferatuantitribu.gif';
import osebo from './../../assets/images/clans/osebo.gif';
import pander from './../../assets/images/clans/pander.gif';
import ravnos from './../../assets/images/clans/ravnos.gif';
import salubri from './../../assets/images/clans/salubri.gif';
import salubriantitribu from './../../assets/images/clans/salubriantitribu.gif';
import samedi from './../../assets/images/clans/samedi.gif';
import toreador from './../../assets/images/clans/toreador.gif';
import toreadorantitribu from './../../assets/images/clans/toreadorantitribu.gif';
import tremere from './../../assets/images/clans/tremere.gif';
import tremereantitribu from './../../assets/images/clans/tremereantitribu.gif';
import truebrujah from './../../assets/images/clans/truebrujah.gif';
import tzimisce from './../../assets/images/clans/tzimisce.gif';
import ventrue from './../../assets/images/clans/ventrue.gif';
import ventrueantitribu from './../../assets/images/clans/ventrueantitribu.gif';
import avenger from './../../assets/images/clans/avenger.gif';
import defender from './../../assets/images/clans/defender.gif';
import innocent from './../../assets/images/clans/innocent.gif';
import judge from './../../assets/images/clans/judge.gif';
import martyr from './../../assets/images/clans/martyr.gif';
import redeemer from './../../assets/images/clans/redeemer.gif';
import visionary from './../../assets/images/clans/visionary.gif';
;
import cap1 from './../../assets/images/misc/cap1.png';
import cap2 from './../../assets/images/misc/cap2.png';
import cap3 from './../../assets/images/misc/cap3.png';
import cap4 from './../../assets/images/misc/cap4.png';
import cap5 from './../../assets/images/misc/cap5.png';
import cap6 from './../../assets/images/misc/cap6.png';
import cap7 from './../../assets/images/misc/cap7.png';
import cap8 from './../../assets/images/misc/cap8.png';
import cap9 from './../../assets/images/misc/cap9.png';
import cap10 from './../../assets/images/misc/cap10.png';
import cap11 from './../../assets/images/misc/cap11.png';

function DeckCryptCapacity(props) {
  const capicons = {
    1: cap1,
    2: cap2,
    3: cap3,
    4: cap4,
    5: cap5,
    6: cap6,
    7: cap7,
    8: cap8,
    9: cap9,
    10: cap10,
    11: cap11,
  };
  const imgClass='capacity-image-results';
  const imgSrc=capicons[props.value];

  return (
    <td width='5%'>
      <img className={imgClass} src={imgSrc} />
    </td>
  );
}

function DeckCryptDisciplines(props) {
  const disciplinesicons = {
    Abombwe: [abombwe, abombwesup],
    Animalism: [animalism, animalismsup],
    Auspex: [auspex, auspexsup],
    Celerity: [celerity, celeritysup],
    Chimerstry: [chimerstry, chimerstrysup],
    Daimoinon: [daimoinon, daimoinonsup],
    Dementation: [dementation, dementationsup],
    Dominate: [dominate, dominatesup],
    Fortitude: [fortitude, fortitudesup],
    Melpominee: [melpominee, melpomineesup],
    Mytherceria: [mytherceria, mytherceriasup],
    Necromancy: [necromancy, necromancysup],
    Obeah: [obeah, obeahsup],
    Obfuscate: [obfuscate, obfuscatesup],
    Obtenebration: [obtenebration, obtenebrationsup],
    Potence: [potence, potencesup],
    Presence: [presence, presencesup],
    Protean: [protean, proteansup],
    Quietus: [quietus, quietussup],
    Sanguinus: [sanguinus, sanguinussup],
    Serpentis: [serpentis, serpentissup],
    Spiritus: [spiritus, spiritussup],
    Temporis: [temporis, temporissup],
    Thanatosis: [thanatosis, thanatosissup],
    Thaumaturgy: [thaumaturgy, thaumaturgysup],
    Valeren: [valeren, valerensup],
    Vicissitude: [vicissitude, vicissitudesup],
    Visceratika: [visceratika, visceratikasup],
  };

  let discipline_rows;
  let empty_rows = [];
  const max_rows = 8;
  let counter = 0;
  const width = 100 / max_rows + '%';

  if (props.disciplines_set.length <= max_rows) {
    discipline_rows = props.disciplines_set.map((d, index) => {
      counter += 1;
      let imgSrc;
      let imgClass;
      if (props.value[d] === undefined) {
        return (
          <td width={width} key={index}>
          </td>
        );
      } else {
        if (props.value[d] == 1) {
          imgSrc = disciplinesicons[d][0];
          imgClass = 'discipline-base-image-results';
        } else if (props.value[d] == 2) {
          imgSrc = disciplinesicons[d][1];
          imgClass = 'discipline-superior-image-results';
        }
        return (
          <td width={width} key={index}>
            <img className={imgClass} src={imgSrc} />
          </td>
        );
      }
    });

  } else {
    discipline_rows = Object.keys(props.value).map((d, index) => {
      counter += 1;
      let imgSrc;
      let imgClass;
      if (props.value[d] == 1) {
        imgSrc = disciplinesicons[d][0];
        imgClass = 'discipline-base-image-results';
      } else if (props.value[d] == 2) {
        imgSrc = disciplinesicons[d][1];
        imgClass = 'discipline-superior-image-results';
      }
      return (
        <td width={width} key={index}>
          <img className={imgClass} src={imgSrc} />
        </td>
      );
    });
  }
  while (counter < max_rows) {
    counter += 1;
    empty_rows.push(
      <td width={width} key={counter}></td>
    );
  }

  return (
    <td width='37%'>
      <table width='100%' border='1'>
        <tbody>
          <tr>
            {discipline_rows}
            {empty_rows}
          </tr>
        </tbody>
      </table>
    </td>
  );
}

function DeckCryptName(props) {
  return (
    <td className='name' width='31%'>
      <a href='#'> {props.value} </a>
    </td>
  );
}

function DeckCryptClan(props) {
  const clanicons = {
    Abomination: abomination,
    Ahrimane: ahrimane,
    Akunanse: akunanse,
    Assamite: assamite,
    Baali: baali,
    'Blood Brother': bloodbrother,
    Brujah: brujah,
    'Brujah antitribu': brujahantitribu,
    Caitiff: caitiff,
    'Daughter of Cacophony': daughterofcacophony,
    'Follower of Set': followerofset,
    Gangrel: gangrel,
    'Gangrel antitribu': gangrelantitribu,
    Gargoyle: gargoyle,
    Giovanni: giovanni,
    Guruhi: guruhi,
    'Harbinger of Skulls': harbingerofskulls,
    Ishtarri: ishtarri,
    Kiasyd: kiasyd,
    Lasombra: lasombra,
    Malkavian: malkavian,
    'Malkavian antitribu': malkavianantitribu,
    Nagaraja: nagaraja,
    Nosferatu: nosferatu,
    'Nosferatu antitribu': nosferatuantitribu,
    Osebo: osebo,
    Pander: pander,
    Ravnos: ravnos,
    Salubri: salubri,
    'Salubri antitribu': salubriantitribu,
    Samedi: samedi,
    Toreador: toreador,
    'Toreador antitribu': toreadorantitribu,
    Tremere: tremere,
    'Tremere antitribu': tremereantitribu,
    'True Brujah': truebrujah,
    Tzimisce: tzimisce,
    Ventrue: ventrue,
    'Ventrue antitribu': ventrueantitribu,
    Avenger: avenger,
    Defender: defender,
    Innocent: innocent,
    Judge: judge,
    Martyr: martyr,
    Redeemer: redeemer,
    Visionary: visionary,
  };
  const imgClass='clan-image-results';
  const imgSrc=clanicons[props.value];

  return (
    <td width='12%'>
      <img className={imgClass} src={imgSrc} />
    </td>
  );
}

function DeckCryptGroup(props) {
  return (
    <td width='6%'>
      <b>
        <font color='a0a0a0'>G</font>
        {props.value}
      </b>
    </td>
  );
}

function DeckCryptQuantity(props) {
  const deckCardChange = props.deckCardChange;
  const deckid = props.deckid;
  const cardid = props.cardid;
  const q = props.q;
  return (
    <td className='quantity' width='16%'>
      <div>
      <button className="btn btn-outline-secondary" type="button" onClick={(e) => deckCardChange(deckid, cardid, q + 1)}>
        +
      </button>
      {' '}{q}{' '}
      <button className="btn btn-outline-secondary" type="button" onClick={(e) => deckCardChange(deckid, cardid, q - 1)}>
        -
      </button>
    </div>
    </td>
  )
}

function DeckCryptBody(props) {
  let resultTrClass='crypt-result-even';
  let d_set = new Set();
  for (const card of Object.keys(props.cards)) {
    for (const d of Object.keys(props.cards[card].c['Disciplines'])) {
      d_set.add(d);
    };
  };
  const disciplines_set = [...d_set].sort();

  const SortByQuantity = (a, b) => {
    if (a.q > b.q) {
      return -1;
    } else {
      return 1;
    }
  };

  const sorted_cards = Object.values(props.cards).sort(SortByQuantity);

  const cards = sorted_cards.map((card, index) => {
    if (resultTrClass == 'crypt-result-even') {
      resultTrClass = 'crypt-result-odd';
    } else {
      resultTrClass = 'crypt-result-even';
    }
    return (
      <tr className={resultTrClass} key={index}>
        <DeckCryptQuantity cardid={card.c['Id']} q={card.q} deckid={props.deckid} deckCardChange={props.deckCardChange} />
        <DeckCryptCapacity value={card.c['Capacity']} />
        <DeckCryptDisciplines disciplines_set={disciplines_set} value={card.c['Disciplines']} />
        <DeckCryptName value={card.c['Name']} />
        <DeckCryptClan value={card.c['Clan']} />
        <DeckCryptGroup value={card.c['Group']} />
      </tr>
    );
  });
  return <tbody>{cards}</tbody>;
}

function DeckCryptResults(props) {

  let crypt_total = 0;
  for (const card in props.cards) {
    crypt_total += props.cards[card].q;
  }

  return (
    <div>
      <b>Crypt [{crypt_total}]:</b>
      <table border='1' width="100%" className="crypt-result-table">
        <DeckCryptBody deckid={props.deckid} deckCardChange={props.deckCardChange} cards={props.cards} />
      </table>
    </div>
  );
}

export default DeckCryptResults;
